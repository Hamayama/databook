<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
{% autoescape true %}
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<title>{{ databook_title }}</title>
<style type="text/css">
<!--
.main_container {
    background-color: #fffca8; /* 背景色 */
    color: #000000;            /* 文字色 */
}
.main_frame {
    margin-left: 10px;
    margin-right: 10px;
    margin-top: 10px;
}
.title_text {
    margin-bottom: 10px;
    text-align: center;
    font-size: 105%;
    font-weight: bold;
}

.data_input table {
    width: 100%;
    margin-top: 10px;
}
.data_input th {
    white-space: nowrap;
}

.data_table table {
    width: 100%;
    margin-top: 10px;
    border-collapse: collapse;
}
.data_table table, .data_table th, .data_table td {
    border: 1px solid #707070;
}
.data_table tr:nth-child(2n) {
    background-color: #ffffff;
}
.data_table tr:nth-child(2n+1) {
    background-color: #e0ffff;
}
.data_table tr:nth-child(5n+1) {
    border-bottom: 2px solid #707070;
}
.data_table th {
    background-color: #0060c0;
    color: #ffffff;
    white-space: nowrap;
}
.data_table .nowrap {
    white-space: nowrap;
}

-->
</style>
</head>

<body class="main_container">
<div class="main_frame">
<div class="title_text">{{ databook_title }}</div>
<b>{{ admin_message }}</b> <a href="{{ url|safe }}">{{ url_linktext }}</a><br><br>
＜概要＞<br>
&nbsp;&nbsp;SPALM Web Interpreter のプログラムを登録可能なデータベースです。(Google App Engine を利用しています)<br>
&nbsp;&nbsp;タイトル名を入力して編集ボタンをクリックにより、データ編集画面を表示し、データの登録を行います。<br>
&nbsp;&nbsp;また、起動ボタンをクリックにより、SPALM Web Interpreter の実行画面を表示し、プログラムの実行を開始します。<br>
<br>
＜注意事項＞<br>
（１）タイトル名の入力で、すでに登録ずみの名前を入力した場合は、既存データの編集になります。<br>
<br>
（２）現状、一度登録したタイトル名は、名称変更や削除を行うことができません。<br>
<br>
（３）データは、日付の新しい順に50件だけ表示されます。<br>
&nbsp;&nbsp;それ以降のデータは、正確なタイトル名の入力もしくは検索でのみ表示されます。<br>
<br>
（４）現状、SPALM Web Interpreter の実行画面では、プログラム（ソース）をセーブすることができません。<br>
&nbsp;&nbsp;データ編集画面のソース欄にコピー＆ペーストして、データ編集画面でセーブする必要があります。<br>
<br>

<div class="data_input">
<form action="{{ editpage_url }}" method="post">
<table><tr>
<th align="left">タイトル:</th>
<th align="left" width="50%"><input type="text" name="title" style="width: 100%;">
<input type="hidden" name="db" value="{{ databook_name }}"></th>
<th align="left" width="50%"><input type="submit" value=" 編集 "></th>
</tr></table>
</form>
<form action="{{ mainpage_url }}" method="get">
<table><tr>
<th align="left">単語検索:</th>
<th align="left" width="50%"><input type="text" name="word" value="{{ search_word }}" style="width: 100%;">
<input type="hidden" name="db" value="{{ databook_name }}"></th>
<th align="left" width="50%"><input type="submit" value=" 検索 "></th>
</tr></table>
<table style="margin-top: 5px;">
{% if message_data %}
    <tr>
    <th align="left" style="white-space: normal;">{{ message_data }}</th>
    </tr>
{% endif %}
{% if search_flag %}
    <tr>
    <th align="left">検索結果:{{ search_count }}件
    <input type="button" value="一覧に戻る" onclick="location.href='{{ mainpage_url }}?db={{ databook_name }}';"></th>
    </tr>
{% endif %}
</table>
</form>
</div>

<div class="data_table">
<table>
<tr>
<th>タイトル</th>
<th>作者</th>
<th>内容</th>
<th>日時</th>
<th colspan="2">操作</th>
</tr>
{% for article in articles %}
    <tr>
    <td width="20%">{{ article.title }}</td>
    <td width="20%">{{ article.author }}</td>
    <td width="40%">{{ article.content }}</td>
    <td class="nowrap">{{ article.date.strftime('%Y-%m-%d %H:%M:%S %Z') }}</td>
    <td class="nowrap"><form action="{{ editpage_url }}" method="post">
    <input type="hidden" name="title" value="{{ article.title }}">
    <input type="hidden" name="db" value="{{ databook_name }}">
    <input type="submit" value=" 編集 ">
    </form></td>
    <td class="nowrap"><form action="{{ runpage_url }}" method="post" target="run_prog">
    <input type="hidden" name="title" value="{{ article.title }}">
    <input type="hidden" name="db" value="{{ databook_name }}">
    <input type="submit" value=" 起動 ">
    </form></td>
    </tr>
{% endfor %}
</table>
</div>

</div>
</body>
</html>
{% endautoescape %}
